{%  extends 'main.html' %}
{% block content %}
{% load static %}

<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title>Analytics Dashboard</title>
        <link rel="stylesheet" href="{% static '/css/analytics_dashboard_page.css' %} "/>
    </head>

    <body>

        <div style="margin-left: 25pt;">
           <h4>
               <strong>Analytics Dashboard</strong>
           </h4>
        </div>
        <div class="graph-container">
            {% if dbc_list %}
                {% for dbc in dbc_list %}
                    <div class="dbc-wrapper">
                        {{ dbc.get_double_barchart | safe }}
                    </div>
                {% endfor %}
            {% endif %}

            {% if all_graphs %}
                {% for graph in all_graphs %}
                    <div class="wrapper">
                        <div class="chart">{{ graph.get_barchart | safe }}</div>
                        <a href="{% url 'delete_graph' graph.pk %}" type="button" class="btn-delete btn btn-outline-danger btn-sm">
                            <strong>X</strong>
                        </a>
                    </div>
                {% endfor %}
            {% endif %}

            <div class="wrapper-create">
                {% csrf_token %}
                <button type="button" class="btn-change btn-add btn btn-outline-secondary btn-lg" data-toggle="modal" data-target="#addGraph" id="-1"><strong>+</strong></button>
            </div>
        </div>


        <!-- Add graph Modal pop-out window-->
        <div class="modal fade" id="addGraph" tabindex="-1" role="dialog" aria-labelledby="addGraphTitle" aria-hidden="true">
            <div class="modal-dialog modal-dialog-centered" role="document">
                <div class="modal-content">

                    <div class="modal-header">
                        <h5 class="modal-title">Graph Options</h5>
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                        </button>
                    </div>
                    <div class="modal-body">
                        {% if add_graph_form %}
                            <form method="POST" id="btn-form" action="{% url 'analytics_dashboard_page' %}">
                                {% csrf_token %}
                                <div class="form-group">
                                    <label for="title" class="col-form-label">Title:</label>
                                    <span><div id="title">{{ add_graph_form.title }}</div></span>
                                </div>
                                <div>
                                    <div class="form-group">
                                        <label for="x-axis" class="col-form-label">X-axis:</label>
                                        <span><div id="x-axis">{{ add_graph_form.xaxis }}</div></span>
                                    </div>
                                    <div class="form-group">
                                        <label for="y-axis" class="col-form-label">Y-axis:</label>
                                        <span><div id="y-axis">{{ add_graph_form.yaxis }}</div></span>
                                    </div>
                                </div>
                                
                                <div class="modal-footer">
                                    <div class="btn-group float-right" role="group" aria-label="Basic example">
                                        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                                        <button type="submit" class="btn btn-primary">Confirm</button>
                                    </div>
                                </div>
                                
                            </form>
                        {% endif %}
                    </div>

                </div>
            </div>
        </div>


    </body>
</html>

{% endblock %}

{% block javascript %}
    <script>
        $(document).ready(function(){
            $('[data-toggle="tooltip"]').tooltip();
        });
    </script>
{% endblock %}



{%  extends 'main.html' %}
{% block content %}

<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Calling Operations</title>
    <script>
        document.addEventListener('click', function(event) {
            id = event.target.getAttribute('class') + '_col4'
            console.log(id)
            if(document.getElementById(id).innerHTML.trim().slice(-1) === '✔'){
                document.getElementById(id).innerHTML = '';
            }else{
                document.getElementById(id).innerHTML = '&#10004';
            }
        }, false);

    </script>
</head>
<body>
<div style="margin-left: 25pt;">
    <h4>
        <strong>Call Operations: Worthy Client Lists</strong>
    </h4>
</div>
{% for campaign, info in data.items %}

<div style="margin-left: 20pt;">
    <h5>Campaign Name: {{campaign}}</h5>
    <table class="table">
        <thead>
        <tr>
            <th scope="col">#</th>
            <th scope="col">First</th>
            <th scope="col">Last</th>
            <th scope="col">Number</th>
            <th scope="col">Checked</th>
        </tr>
        </thead>
        {% for p in info %}
        {% if p.4 == 1%}
        <tbody>
        <th scope="row" class="{{campaign}}_{{p.0}}">{{ p.0 }}</th>
        <td class="{{campaign}}_{{p.0}}">{{ p.1 }}</td>
        <td class="{{campaign}}_{{p.0}}">{{ p.2 }}</td>
        <td class="{{campaign}}_{{p.0}}">{{ p.3 }}</td>
        <td class="{{campaign}}_{{p.0}}" id="{{campaign}}_{{p.0}}_col4"></td>
        </tbody>
        {% endif %}
        {% endfor %}
    </table>
</div>

{% endfor %}


</body>
</html>

{% endblock %}




{%  extends 'main.html' %}
{% block content %}
{% load static %}

<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Data Entry</title>
    <link rel="stylesheet" href="{% static '/css/data_entry_page.css' %} "/>
</head>

<body>
<div style="margin-left: 25pt;">
    <h4>
        <strong>Data Entry</strong>
    </h4>
</div>
<div class="content">
    {% if documents %}
    <table class="table">
        <thead>
        <tr>
            <th scope="col"><h5>All of User <strong>{{request.user.get_username}}</strong>'s data in DataBase:</h5></th>
        </tr>
        </thead>
        <ul>

            {% for document in documents %}
            <tbody>
            <td scope="roll">
                <li><a href="/media/{{document}}">{{document}}</a></li>
            </td>
            </tbody>
            {% endfor %}
        </ul>
    </table>
    {% else %}
    <p>No documents.</p>
    {% endif %}

    <form action="{% url 'data_entry_page' %}" method="post" enctype="multipart/form-data">
        {% csrf_token %}
        <p>Upload your files here &#8595</p>
        <p>{{ form.non_field_errors }}</p>

        <p>{{ form.docfile.label_tag }} {{ form.docfile.help_text }}</p>

        <p>
            {{ form.docfile.errors }}
            {{ form.docfile }}
        </p>

        {% if error == 1 %}
        <p style="color: red;"><strong>There's an error while uploading, make sure the uploaded file is CSV and satisfies the format.</strong></p>
        {% endif %}
        {% if error == 2 %}
        <p style="color: red;"><strong>This file is already in your repo!</strong></p>
        {% endif %}

        <p>
            <button class="btn btn-success" type="submit" value="Upload">Upload File</button>
        </p>
    </form>

    <h5>Please Make Sure the Input File is a CSV File in the Format Defined Below:</h5>
    <table class="table">
        <thead>
        <tr>
            <th scope="col">Data Type</th>
            <th scope="col">Explanation</th>
        </tr>
        </thead>
        <tbody>
        <td scope="roll"><strong>age</strong></td>
        <td scope="roll">Age of the client.</td>
        </tbody>
        <tbody>
        <td scope="roll"><strong>job</strong></td>
        <td scope="roll">Type of client's job. (categorical:
            ‘admin.’,’blue-collar’,’entrepreneur’,’housemaid’,’management’,’retired’,’self-employed’,’services’,’student’,’technician’,’unemployed’,’unknown’)
        </td>
        </tbody>
        <tbody>
        <td scope="roll"><strong>marital</strong></td>
        <td scope="roll">Client's marital status. (categorical: ‘divorced’,’married’,’single’,’unknown’; note:
            ‘divorced’ means divorced or widowed)
        </td>
        </tbody>

        <tbody>
        <td scope="roll"><strong>education</strong></td>
        <td scope="roll">Client's educational level. (categorical:
            ‘basic.4y’,’basic.6y’,’basic.9y’,’high.school’,’illiterate’,’professional.course’,’university.degree’,’unknown’)
        </td>
        </tbody>

        <tbody>
        <td scope="roll"><strong>default</strong></td>
        <td scope="roll">If client has credit in default? (categorical: ‘no’,’yes’,’unknown’)</td>
        </tbody>

        <tbody>
        <td scope="roll"><strong>housing</strong></td>
        <td scope="roll">If client has housing loan? (categorical: ‘no’,’yes’,’unknown’)</td>
        </tbody>

        <tbody>
        <td scope="roll"><strong>loan</strong></td>
        <td scope="roll">If client has has personal loan? (categorical: ‘no’,’yes’,’unknown’)</td>
        </tbody>

        <tbody>
        <td scope="roll"><strong>contact</strong></td>
        <td scope="roll">How the client is communicated? (categorical: ‘cellular’,’telephone’)</td>
        </tbody>

        <tbody>
        <td scope="roll"><strong>month</strong></td>
        <td scope="roll">Last month when the client is contact if applicable. (categorical: ‘jan’, ‘feb’, ‘mar’, …,
            ‘nov’, ‘dec’)
        </td>
        </tbody>

        <tbody>
        <td scope="roll"><strong>day_of_week</strong></td>
        <td scope="roll">Last contact day of the week if applicable. (categorical: ‘mon’,’tue’,’wed’,’thu’,’fri’)</td>
        </tbody>

        <tbody>
        <td scope="roll"><strong>duration</strong></td>
        <td scope="roll">Duration of last contact with the client if applicable.</td>
        </tbody>

        <tbody>
        <td scope="roll"><strong>campaign</strong></td>
        <td scope="roll">number of contacts performed on this client. (0 if not contacted)</td>
        </tbody>

        <tbody>
        <td scope="roll"><strong>pdays</strong></td>
        <td scope="roll">Number of days that passed by after the client was last contacted. (999 if never contacted
            previously)/td>
        </tbody>

        <tbody>
        <td scope="roll"><strong>previous</strong></td>
        <td scope="roll">Number of contacts performed before this campaign and for this client. (0 if none)</td>
        </tbody>

        <tbody>
        <td scope="roll"><strong>poutcome</strong></td>
        <td scope="roll">Outcome of the previous marketing campaign on this client. (categorical:
            ‘failure’,’nonexistent’,’success’)
        </td>
        </tbody>

        <tbody>
        <td scope="roll"><strong>emp.var.rate</strong></td>
        <td scope="roll">Client's employment variation rate.</td>
        </tbody>

        <tbody>
        <td scope="roll"><strong>cons.price.idx</strong></td>
        <td scope="roll">Average of Consumer price index.</td>
        </tbody>

        <tbody>
        <td scope="roll"><strong>cons.conf.idx</strong></td>
        <td scope="roll">Average of Consumer confidence index.</td>
        </tbody>

        <tbody>
        <td scope="roll"><strong>euribor3m</strong></td>
        <td scope="roll">Average of Euribor rate for 3 month.</td>
        </tbody>

        <tbody>
        <td scope="roll"><strong>nr.employed</strong></td>
        <td scope="roll">Average of total number of employed citizens.</td>
        </tbody>

        <tbody>
        <td scope="roll"><strong>y</strong></td>
        <td scope="roll">Enter 'null' for a place holder.</td>
        </tbody>

        <tbody>
        <td scope="roll"><strong>first_name</strong></td>
        <td scope="roll">Client's first name.</td>
        </tbody>

        <tbody>
        <td scope="roll"><strong>last_name</strong></td>
        <td scope="roll">Client's last name.</td>
        </tbody>

        <tbody>
        <td scope="roll"><strong>number</strong></td>
        <td scope="roll">Client's contact number.</td>
        </tbody>
    </table>

</div>
</body>
</html>

{% endblock %}




{%  extends 'main.html' %}

{% load static %}
{% load bootstrap4 %}
{% load i18n %}

{% block content %}

<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title>Signup</title>
        <style>
            body {
                position: relative;
            }
            #form-wrapper {
                width: 300px;
                height: 200px;
                position: absolute;
                top: 250%;
                left: 50%;
                margin-top: -100px;
                margin-left: -150px;
            }
        </style>
    </head>
    <body>
        <div id="form-wrapper">
            <h4>{% trans 'Log in' %}</h4>
            <form method="post">
                {% csrf_token %}
                {% bootstrap_form form %}
                <button class="btn btn-primary">{% trans 'Log in' %}</button>
            </form>
            <hr>
        </div>
    </body>
</html>

{% endblock %}




{%  extends 'main.html' %}

{% load static %}
{% load bootstrap4 %}
{% load i18n %}

{% block content %}

<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title>Log out</title>
        <style>
          body {
              position: relative;
          }
          #form-wrapper {
              width: 300px;
              height: 200px;
              position: absolute;
              top: 250%;
              left: 50%;
              margin-top: -100px;
              margin-left: -150px;
          }
        </style>
    </head>
    <body>
      <div id="form-wrapper">
        <h4>{% trans 'Logged out' %}</h4>
        <p>{% trans 'See you next time.' %}</p>
        <p><a href="{% url 'login' %}">{% trans 'Log in again' %}</a></p>
      </div>
    </body>
</html>

{% endblock %}




{% load static %}
<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta http-equiv="X-UA-Compatible" content="IE=edge" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>JerryUp Campaigning Master</title>
		<link
			rel="stylesheet"
			href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css"
			integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm"
			crossorigin="anonymous"
		/>
		<link rel="stylesheet" href="{% static '/css/main.css' %} "/>
	</head>

	<body>
		{% include 'navbar.html' %}
		<hr />
		{% block content %} {% endblock %}
		<hr />

		<!-- JavaScript Bundle with Popper -->
		<script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
    <!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script> -->
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>

		<script src="{% static 'vendor/jquery/jquery-3.4.1.min.js' %}"></script>
		<script src="{% static 'vendor/popper/popper.min.js' %}"></script>
		<script src="{% static 'vendor/bootstrap/js/bootstrap.min.js' %}"></script>

		<script src="{% static 'js/ie10-viewport-bug-workaround.js' %}"></script>
    {% block javascript %}{% endblock %}
	</body>
</html>




{%  extends 'main.html' %}
{% load static %}
{% load bootstrap4 %}
{% load i18n %}
{% block content %}

<html>
<head>
    <meta charset="utf-8">
    <title>Model Control</title>
    <style>
        .data-tab {
            width: 400px;
            margin-bottom: 10px;
        }
    </style>
</head>

<body>
<div style="margin-left: 25pt;">
    <h4>
        <strong>Models Configurations</strong>
    </h4>
</div>
<form method="post">
    {% csrf_token %}
        <div style="margin-top: 10px; margin-left: 25pt; margin-bottom: 40pt;" class="periodical-train">
            <h5>Automatic Model Training</h5>
            <strong>After you end training, the training process will terminate in less than 1 training cycle time
                but not immediately, you can just leave this page safely.</strong>
            <p>{{ message|safe }}</p>
            <div name="period-train">
                <button type="submit" class="btn btn-primary" style="margin-top: 5px; margin-right: 5px" name="start">
                    Start training
                </button>
                <button type="submit" class="btn btn-primary" style="margin-top: 5px; margin-left: 5px"  name="end">
                    End training
                </button>
            </div>
        </div>
        <div style="margin-left: 25pt;" class="form-group">
            <h5>Model Adjustment</h5>
            <p>Please stop training before submitting your new configurations.</p>
            <div class="data-tab">
                <label>Number of Rows Fetched</label>
                <ul style="color: gray">
                    <li> The number of data to train the model in one cycle.</li>
                    <li> More data mean higher accuracy, but training might be slower.</li>
                </ul>
                <input type="number" class="form-control" name="numFetchRows" placeholder="Suggested Rows 50 ~ 500...">
            </div>

            <div class="data-tab">
                <label>Update Period</label>
                 <ul style="color: gray">
                    <li> Period of time to train the model once.</li>
                </ul>
                <input type="number" class="form-control" name="period" placeholder="Period...">
            </div>

            <div class="data-tab">
                <label>Learning Rate</label>
                <ul style="color: gray">
                    <li> Learning rate for our model.</li>
                    <li> High learning rate means slow training but high accuracy.</li>
                </ul>
                <input type="number" step="0.0001" class="form-control" name="eta"
                       placeholder="Suggested Rate 0.005 ~ 0.5...">
            </div>
            <div class="data-tab">
                <label>Max Decision Tree Depth</label>
                <ul style="color: gray">
                    <li> If the depth is too high, the tree loses the generalization ability to new data.</li>
                    <li> If the depth is too low, the tree cannot be trained well on the new input data.</li>
                </ul>
                <input type="number" class="form-control" name="max_depth" placeholder="Suggested Depth 5 ~ 500...">
            </div>
            <button type="submit" class="btn btn-primary" style="margin-top: 10px;" name="configure">Submit</button>
        </div>
    </form>

</body>
</html>

{% endblock %}




{% load static %}
<nav class="navbar navbar-expand-lg navbar-dark bg-dark">
	<!-- <script  type="text/javascript">
		function changeActive(e) {
			event.preventDefault();

			var element = document.getElementsByClassName("active")[0];
			var target = e.target || e.srcElement;
			element.classList.remove("active");
			target.classList.add("active");
      // window.location.href = "/analytics_dashboard_page";
		}
	</script> -->

	<div class="container-fluid">
		<img class="navbar-brand" src="{% static '/images/app_logo.png' %}">
		<button
			class="navbar-toggler"
			type="button"
			data-bs-toggle="collapse"
			data-bs-target="#navbarNavAltMarkup"
			aria-controls="navbarNavAltMarkup"
			aria-expanded="false"
			aria-label="Toggle navigation"
		>
			<span class="navbar-toggler-icon"></span>
		</button>
		<div class="collapse navbar-collapse" id="navbarNavAltMarkup">
			<div class="navbar-nav">
				{% if user.is_authenticated %}
					{% if current == 'data_entry_page' %}
						<a class="nav-link active" href="/data_entry_page" onclick="changeActive(event)">Data Entry</a>
					{% else %}
						<a class="nav-link" href="/data_entry_page" onclick="changeActive(event)">Data Entry</a>
					{% endif %}

					{% if current == 'analytics_dashboard_page' %}
						<a class="nav-link active" href="/analytics_dashboard_page" onclick="changeActive(event)">Analytics Dashboard</a>
					{% else %}
						<a class="nav-link" href="/analytics_dashboard_page" onclick="changeActive(event)">Analytics Dashboard</a>
					{% endif %}

					{% if current == 'calling_operations_page' %}
						<a class="nav-link active" href="/calling_operations_page" onclick="changeActive(event)">Calling Operations</a>
					{% else %}
						<a class="nav-link" href="/calling_operations_page" onclick="changeActive(event)">Calling Operations</a>
					{% endif %}

					{% if current == 'model_controlls_page' %}
						<a class="nav-link active" href="/model_controlls_page" onclick="changeActive(event)">Model Controlls</a>
					{% else %}
						<a class="nav-link" href="/model_controlls_page" onclick="changeActive(event)">Model Controlls</a>
					{% endif %}

				{% endif %}

				{% if request.user.is_authenticated %}

					{% if current == 'logout' %}
						<a class="nav-link active" href="/logout" onclick="changeActive(event)">Log out</a>
					{% else %}
						<a class="nav-link" href="/logout" onclick="changeActive(event)">Log out</a>
					{% endif %}

					<a style="left: 900px; position: relative;" class="nav-link" >Hi! {{ request.user.get_username}}!</a>

				{% else %}
					{% if current == 'login' %}
						<a class="nav-link active" href="/login" onclick="changeActive(event)">Log in</a>
					{% else %}
						<a class="nav-link" href="/login" onclick="changeActive(event)">Log in</a>
					{% endif %}

					{% if current == 'signup' %}
						<a class="nav-link active" href="/signup" onclick="changeActive(event)">Create an account</a>
					{% else %}
						<a class="nav-link" href="/signup" onclick="changeActive(event)">Create an account</a>
					{% endif %}

				{% endif %}

			</div>
		</div>
	</div>
</nav>




{%  extends 'main.html' %}

{% load static %}
{% load bootstrap4 %}
{% load i18n %}

{% block content %}

<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title>Signup</title>
        <style>
            body {
                position: relative;
            }
            #form-wrapper {
                width: 300px;
                height: 200px;
                position: absolute;
                top: 250%;
                left: 50%;
                margin-top: -100px;
                margin-left: -150px;
            }
        </style>
    </head>
    <body>
        <div id="form-wrapper">
            <h4>{% trans 'Create an account' %}</h4>
            <form method="post">
                {% csrf_token %}
                {% bootstrap_form form %}
                <button class="btn btn-success">{% trans 'Create' %}</button>
            </form>
        </div>
        
      </body>
</html>

{% endblock %}